# Features & Migration Strategy - Photo4You

## 🔄 기존 sunset-cinema 프로젝트 활용 전략

### 기존 프로젝트 분석
**sunset-cinema**는 영화적 감성의 프로필 사진 촬영 문의 관리 시스템으로 다음 기능들을 보유:

#### 기존 활용 가능한 기능들
- ✅ **카테고리 기반 포트폴리오 시스템** → 성격유형별 갤러리로 활용
- ✅ **문의/예약 시스템** → 성향 진단 후 예약 시스템으로 확장
- ✅ **관리자 시스템** → 작가 관리 시스템으로 활용
- ✅ **사진 업로드/관리 시스템** → 그대로 활용
- ✅ **예약 시간 관리** → 그대로 활용
- ✅ **Supabase 인프라** → 스키마만 확장하여 활용

#### 새로 추가해야 할 기능들
- 🆕 **성향 진단 시스템** (21문항 설문)
- 🆕 **AI 이미지 생성 시스템**
- 🆕 **성격유형별 작가 매칭 시스템**
- 🆕 **성향 진단 결과 페이지**

## 📋 전체 기능 목록 (권한별/페이지별)

### 🌐 Public (익명 사용자)

#### 1. 랜딩 페이지 (`/`)
- [ ] **히어로 섹션** (프로젝트 의미와 가치 전달)
  - [ ] 메인 타이틀: "나만의 성향을 찾아가는 포토 여정"
  - [ ] 서브 타이틀: 프로젝트 취지 및 차별화 포인트
  - [ ] 메인 CTA 버튼: "성향 진단 시작하기" → `/quiz`
- [ ] **서비스 특징 소개 섹션**
  - [ ] 성향 진단 시스템 소개
  - [ ] AI 이미지 미리보기 기능
  - [ ] 맞춤형 작가 매칭 시스템
- [ ] **9가지 성격유형 미리보기**
  - [ ] 각 유형별 대표 이미지와 간단한 설명
  - [ ] 호버/클릭 시 상세 정보 표시
- [ ] **프로세스 플로우 설명**
  - [ ] 진단 → AI 미리보기 → 작가 매칭 → 예약 단계 시각화
- [ ] **추천 작가 갤러리**
  - [ ] 대표 작가들의 포트폴리오 미리보기
  - [ ] 작가별 전문 성격유형 표시
- [ ] **고객 후기 및 결과물 갤러리**
  - [ ] 실제 촬영 결과물들
  - [ ] 고객 만족도 및 리뷰
- [ ] **CTA 섹션** (페이지 하단)
  - [ ] "지금 바로 나의 사진 성향 알아보기" 버튼 → `/quiz`

#### 2. 성향 진단 페이지 (`/quiz`)
- [ ] **진단 세션 생성** (IP, User-Agent 추적)
- [ ] **21문항 설문 인터페이스**
  - [ ] 진행률 표시
  - [ ] 질문 파트 구분 (감정/사진)
  - [ ] 이미지/텍스트 선택지 지원
  - [ ] 응답 시간 측정
  - [ ] 뒤로가기 방지
- [ ] **설문 완료 및 결과 계산**
- [ ] **로딩 애니메이션** (결과 처리 중)

#### 3. 진단 결과 페이지 (`/quiz/result/[sessionId]`)
- [ ] **성격유형 결과 표시**
  - [ ] 성격유형 이름 및 설명
  - [ ] 예시 인물 소개
  - [ ] 스타일 키워드 표시
  - [ ] 추천 장소/소품 정보
- [ ] **AI 이미지 생성 섹션**
  - [ ] 사진 업로드 (드래그&드롭 지원)
  - [ ] AI 이미지 생성 요청
  - [ ] 생성 진행상황 표시
  - [ ] 결과 이미지 표시 및 다운로드
  - [ ] 만족도 평가 (1-5점)
- [ ] **추천 사진 갤러리** (9장)
  - [ ] 성격유형별 맞춤 사진들
  - [ ] 이미지 확대보기
  - [ ] 스타일 태그 표시
- [ ] **추천 작가 섹션** (1-3명)
  - [ ] 호환성 점수 표시
  - [ ] 작가 대표 사진
  - [ ] 작가 프로필 미리보기
  - [ ] 예약하기 버튼
- [ ] **결과 공유 기능**
  - [ ] SNS 공유 (인스타그램, 페이스북 등)
  - [ ] 링크 복사
  - [ ] 이미지로 저장

#### 4. 작가 목록 페이지 (`/photographers`)
- [ ] **전체 작가 목록 표시**
- [ ] **성격유형별 필터링**
- [ ] **작가 검색 기능**
- [ ] **정렬 옵션** (호환성, 인기도 등)

#### 5. 작가 상세 페이지 (`/photographers/[id]`)
- [ ] **작가 프로필 정보**
  - [ ] 이름, 경력, 소개
  - [ ] 전문 스타일 태그
  - [ ] 호환 성격유형 표시
- [ ] **포트폴리오 갤러리**
  - [ ] 대표 작품들
  - [ ] 스타일별 분류
  - [ ] 고화질 이미지 보기
- [ ] **리뷰 및 평점**
- [ ] **예약하기 버튼**

#### 6. 예약 페이지 (`/photographers/[id]/booking`)
- [ ] **예약 가능 시간 선택**
  - [ ] 캘린더 인터페이스
  - [ ] 시간대별 예약 현황
  - [ ] 실시간 예약 상황 업데이트
- [ ] **예약자 정보 입력**
  - [ ] 이름, 연락처 (필수)
  - [ ] 특별 요청사항
  - [ ] 성향 진단 결과 자동 연결
- [ ] **예약 확인 및 완료**
- [ ] **예약 확인 이메일/SMS**

#### 7. 예약 확인 페이지 (`/booking/[inquiryId]`)
- [ ] **예약 상세 정보 확인**
- [ ] **예약 상태 추적**
- [ ] **작가 연락처 정보**
- [ ] **촬영 준비 안내사항**

#### 8. 갤러리 페이지 (`/gallery`)
- [x] **전체 작품 갤러리** (Supabase 연동 완료)
- [x] **카테고리별 필터링** (기존 카테고리 시스템 활용)
- [x] **무한 스크롤 로딩** (Gallery Client 구현됨)
- [x] **고화질 이미지 뷰어** (AspectImage 컴포넌트)
- [ ] **성격유형별 필터링** (성격유형 시스템 연동 필요)
- [ ] **작가별 필터링**

### 🔐 Admin (작가/관리자)

#### 9. 관리자 로그인 (`/login`)
- [x] **이메일/패스워드 로그인** (LoginForm 컴포넌트)
- [x] **회원가입 기능** (SignupForm 컴포넌트)
- [x] **Supabase Auth 연동** (완전 구현됨)
- [x] **로그인 상태 유지** (세션 관리)
- [ ] **비밀번호 재설정**

#### 10. 관리자 대시보드 (`/admin`)
- [x] **문의 목록 및 상태 관리** (InquiryTable 구현됨)
- [x] **문의 상세 정보 보기** (InquiryDetails 구현됨)
- [x] **문의 상태 업데이트** (StatusBadge 구현됨)
- [x] **관리자 노트 추가/편집**
- [x] **필터링 및 검색** (AdminFilters 구현됨)
- [x] **페이지네이션** (Pagination 구현됨)
- [ ] **성향 진단 통계**
- [ ] **포트폴리오 성과 분석**

#### 11. 사진 관리 (`/admin/photos`)
- [x] **사진 업로드 및 관리** (PhotoUploader 구현됨)
  - [x] 드래그&드롭 업로드
  - [x] 멀티파일 업로드
  - [x] 썸네일 자동 생성
  - [x] 메타데이터 입력
  - [x] 공개/비공개 설정
- [x] **사진 갤러리 뷰** (PhotoGallery 구현됨)
- [x] **사진 필터링 및 검색** (PhotoFilters 구현됨)
- [x] **사진 상세 정보 관리**
- [x] **업로드 통계** (UploadStatistics 구현됨)
- [ ] **성격유형별 사진 분류**

#### 12. 카테고리 관리 (`/admin/category`)
- [x] **카테고리 트리 구조 관리** (CategoryTree 구현됨)
- [x] **드래그&드롭 카테고리 정렬** (CategoryNode 구현됨)
- [x] **카테고리 추가/편집/삭제** (Modal 시스템)
- [x] **카테고리별 대표 이미지 설정**
- [x] **계층 구조 관리** (무한 depth 지원)
- [x] **카테고리 활성/비활성 관리**

#### 13. 일정 관리 (`/admin/schedule`)
- [x] **시간 슬롯 생성 및 관리** (SlotManager 구현됨)
- [x] **일별/주별/월별 일정 관리**
- [x] **대량 일정 생성** (BulkScheduleModal)
- [x] **예약 가능 시간 설정**
- [x] **시간 충돌 방지**
- [x] **스케줄 통계** (ScheduleStats 구현됨)

#### 14. 계정 설정 (`/admin/my-page`)
- [x] **프로필 정보 관리** (ProfileSection 구현됨)
- [x] **계정 설정** (AccountSettings 구현됨)
- [x] **사용자 통계 확인**
- [x] **보안 설정**

#### 15. 성격유형 매칭 관리 (`/admin/personality-mapping`)
- [ ] **담당 성격유형 설정**
- [ ] **호환성 점수 관리**
- [ ] **주력 담당 유형 지정**
- [ ] **매칭 노트 작성**

#### 16. 통계 및 분석 (`/admin/analytics`)
- [ ] **성향 진단 통계**
  - [ ] 성격유형별 분포
  - [ ] 월별/일별 진단 횟수
  - [ ] 완료율 분석
- [x] **예약 통계** (기본 통계 구현됨)
  - [x] 문의 개수 및 상태별 분포
  - [x] 최근 활동 추적
  - [ ] 성격유형별 예약 현황
  - [ ] 월별 수익 분석
  - [ ] 인기 시간대 분석
- [x] **사진 업로드 통계** (UploadStatistics 구현됨)
- [ ] **AI 이미지 생성 통계**
  - [ ] 생성 요청 수
  - [ ] 만족도 평가 결과
  - [ ] API 사용량 모니터링

### 🎯 Super Admin (시스템 관리자)

#### 17. 성향 진단 시스템 관리 (`/admin/quiz-management`)
- [🔶] **성격유형 데이터 준비 완료** (CSV 파일로 정의됨)
  - [🔶] 9가지 성격유형 정의 (A1~F2)
  - [🔶] 21개 질문별 가중치 매트릭스
- [ ] **질문 및 선택지 관리**
  - [ ] 질문 추가/수정/삭제
  - [ ] 선택지 추가/수정/삭제
  - [ ] 이미지 업로드 및 관리
- [ ] **가중치 시스템 관리**
  - [ ] 성격유형별 가중치 조정
  - [ ] 진단 알고리즘 튜닝
- [ ] **성격유형 관리**
  - [ ] 유형 정보 수정
  - [ ] AI 프롬프트 관리
  - [ ] 대표 이미지 설정

#### 18. 전체 시스템 관리 (`/admin/system`)
- [x] **사용자 관리** (기본 구현됨)
- [x] **권한 관리** (Supabase RLS 기반)
- [ ] **시스템 설정**
- [ ] **백업 및 복원**

## 🔄 기존 시스템에서 확장/수정이 필요한 부분

### Database Schema 확장
```sql
-- 기존 테이블 유지하면서 새로운 테이블 추가
-- personality_types, quiz_questions, quiz_choices, choice_weights
-- quiz_sessions, quiz_responses, ai_image_generations
-- personality_admin_mapping, personality_photos
-- admin_portfolio_photos (기존 photos 테이블 확장)
```

### 기존 컴포넌트 재사용 및 확장
- ✅ **완전 구현됨**: 사진 업로드, 카테고리 관리, 예약 시스템, 관리자 대시보드
- ✅ **현재 플로우**: 카테고리 토너먼트 → 개인정보 → 무드 키워드 → 시간 예약
- 🔄 **수정 필요**: 기존 플로우를 성향 진단 → 결과 → 작가 매칭 → 예약으로 변경
- 🆕 **추가 필요**: 성향 진단 UI, AI 이미지 생성, 성격유형 결과 페이지

### 데이터 처리 방식 변경
- ❌ **API Routes 사용 안함**: `/api/*` 경로 대신 Server Actions 활용
- ✅ **Server Actions**: `lib/actions/` 디렉토리에서 서버 함수 관리
- ✅ **Direct Supabase Client**: 클라이언트에서 직접 Supabase 호출
- ✅ **React Query**: 서버 상태 관리 및 캐싱

```typescript
// 기존 방식 (계속 활용)
- lib/actions/code.ts (서버 액션)
- lib/supabase/client.ts (클라이언트 측)
- lib/supabase/server.ts (서버 측)

// 새로 추가할 서버 액션들
- lib/actions/quiz.ts (성향 진단 관련)
- lib/actions/personality.ts (성격유형 관리)
- lib/actions/ai.ts (AI 이미지 생성)
- lib/actions/matching.ts (작가 매칭)
```

## 🎨 UI/UX 개선 사항

### 기존 UI 컴포넌트 활용
- ✅ **shadcn/ui 컴포넌트들** 그대로 활용
- ✅ **기존 디자인 시스템** 확장하여 성격유형별 테마 추가
- ✅ **반응형 레이아웃** 유지

### 새로운 UI 패턴
- 🆕 **진단 플로우 UI** (진행바, 질문 카드 등)
- 🆕 **결과 페이지 UI** (성격유형 카드, 갤러리 등)
- 🆕 **AI 이미지 생성 UI** (업로드, 진행상황, 결과)

## 📱 모바일 최적화

### 기존 반응형 유지
- ✅ **모바일 우선 설계** 유지
- ✅ **터치 친화적 인터페이스** 유지

### 추가 모바일 기능
- 🆕 **진단 결과 모바일 공유** (인스타그램 스토리 등)
- 🆕 **모바일 카메라 연동** (AI 이미지 생성용)

## 🔍 SEO 및 마케팅 기능

### 기존 SEO 유지
- ✅ **Next.js 메타데이터** 시스템 활용

### 추가 마케팅 기능
- 🆕 **성격유형별 랜딩 페이지**
- 🆕 **결과 공유 최적화** (OpenGraph, Twitter Cards)
- 🆕 **바이럴 요소** (재미있는 진단 결과)

## 🎯 현재 구현 상태 요약

### ✅ 완전히 구현된 기능들 (Production Ready)
1. **전체 관리자 시스템**: 로그인, 대시보드, 사진/카테고리/일정 관리, 계정 설정
2. **예약 시스템**: 시간 슬롯 관리, 예약 처리, 상태 관리
3. **갤러리 시스템**: 사진 업로드, 카테고리별 관리, 무한 스크롤 갤러리
4. **기존 사용자 플로우**: 카테고리 선택 → 개인정보 → 무드 키워드 → 예약 (레거시)
5. **기술 인프라**: Supabase 연동, 인증, 파일 업로드, 이메일 알림, Server Actions

### 🔶 데이터 준비 완료 (구현만 필요)
1. **성격유형 데이터**: 9가지 성격유형 정의 (CSV 파일)
2. **진단 가중치**: 21개 질문의 성격유형별 점수 매트릭스
3. **무드 키워드 시스템**: 감정 키워드 데이터베이스

### 🆕 신규 개발 필요 기능들
1. **마케팅 랜딩 페이지**: 프로젝트 취지 및 가치 전달 (`/`)
2. **성향 진단 UI**: 21문항 설문 인터페이스 (`/quiz`)
3. **성격유형 결과 페이지**: 진단 결과 표시 및 AI 이미지 생성 (`/quiz/result/[sessionId]`)
4. **AI 이미지 생성**: OpenAI/Runway API 연동 (Server Actions)
5. **작가 매칭 시스템**: 성격유형 기반 추천
6. **성격유형 관리**: 관리자용 성격유형 데이터 관리

## 🚀 우선순위별 개발 계획 (최신 업데이트)

### Phase 1: 랜딩 페이지 및 데이터베이스 구축 (3일)
1. ✅ **기존 시스템 분석 완료**
2. **마케팅 랜딩 페이지 개발** (`/` 완전 재구성)
   - 프로젝트 취지 및 가치 전달 히어로 섹션
   - 9가지 성격유형 미리보기
   - 서비스 플로우 시각화
   - "성향 진단 시작하기" CTA → `/quiz`
3. **데이터베이스 확장**
   - 성격유형 관련 테이블 생성 (personality_types, quiz_questions, etc.)
   - CSV 데이터를 데이터베이스로 마이그레이션

### Phase 2: 성향 진단 시스템 (1주)
1. **진단 페이지 구조** (`/quiz`)
   - 21문항 설문 UI 컴포넌트 개발
   - 진행률 표시 및 네비게이션
2. **Server Actions 구현**
   - `lib/actions/quiz.ts`: 세션 생성, 응답 저장
   - `lib/actions/personality.ts`: 결과 계산 로직
3. **결과 페이지 기본 구조** (`/quiz/result/[sessionId]`)

### Phase 3: AI 이미지 생성 연동 (1주)
1. **Server Actions으로 AI 통합**
   - `lib/actions/ai.ts`: OpenAI/Runway API 호출
   - 이미지 업로드 및 AI 처리 플로우
2. **결과 페이지 AI 섹션**
   - 사진 업로드 UI
   - 생성 상태 관리 및 결과 표시
   - 다운로드 및 만족도 평가

### Phase 4: 작가 매칭 시스템 (1주)
1. **매칭 로직 구현**
   - `lib/actions/matching.ts`: 성격유형별 작가 추천
   - 호환성 점수 계산 알고리즘
2. **결과 페이지 완성**
   - 추천 작가 섹션
   - 작가 프로필 미리보기
   - 예약하기 버튼 연결

### Phase 5: 관리자 기능 및 플로우 통합 (3일)
1. **기존 플로우 유지 + 새 플로우 추가**
   - 랜딩 페이지 → `/quiz` (새 메인 플로우)
   - 기존 직접 예약 플로우도 유지 (어드민 전용 또는 대안 경로)
2. **관리자 성격유형 관리 기능**
   - 성격유형 데이터 편집
   - 진단 통계 대시보드
3. **결과 공유 기능**
   - SNS 공유 최적화
   - OpenGraph 메타데이터

### Phase 6: 최적화 및 배포 (3일)
1. **성능 최적화**
   - 이미지 최적화 및 로딩 성능
   - React Query 캐싱 최적화
2. **SEO 및 마케팅**
   - 성격유형별 메타데이터
   - 구조화된 데이터 마크업
3. **프로덕션 배포 및 모니터링**

## 💡 핵심 장점
현재 시스템은 **이미 완성도 높은 사진 예약 플랫폼**으로 운영 가능하며, 성격유형 기능은 **차별화 요소 추가**의 성격입니다. 기존 시스템의 안정성을 유지하면서 단계적으로 확장할 수 있어 리스크가 낮습니다.